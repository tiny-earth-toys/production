{% comment %}theme-check-disable TemplateLength{% endcomment %}
{%- liquid
  assign section_color = "tertiary"
  assign tags_enabled = false
  assign filtering_enabled = true
  assign sorting_enabled = true
  assign posts_per_row_mobile = "one-half"
  assign posts_per_row_desktop = "one-third"
  assign collection = collections['toys-active']
-%}
  {% if collection.image %}
<div class="collection-top">
{{ collection.image.src | collection_img_url: 'large' | img_tag: collection_title }}
  <div class="collection-description">
    {{ collection.description }}
  </div>
</div>
 {% endif %}
<section class="collection section-with-padding color--{{ section_color }}-text bg--{{ section_color }}-background" data-section-type="collection" data-section-id="{{ section.id }}" {% if settings.fade_in_items %}data-fade-in="true"{% endif %}>
  <div class="max-site-width px2 lg--up--px3">

    <header role="banner">
      {% if collection.image and section.settings.show_collection_image %}
      <div class="mb3 lg--up--mb4 md--up--four-fifths mx--auto">
        {% assign image = collection.image %}
        {% render 'responsive-image' with
           image: image,
           max_width: 2000,
           max_height: 2000,
           section_color: section_color,
        %}
      </div>
      {% endif %}

      {%- liquid
        if filtering_enabled and sorting_enabled
          assign container_classes = ''
          assign meta_classes = ''
          assign form_classes = ''
        elsif sorting_enabled
          assign container_classes = 'lg--up--flex'
          assign meta_classes = 'lg--up--one-half lg--up--self--end'
          assign form_classes = 'lg--up--one-half lg--up--text-align--right'
        endif
      -%}

      <div id="" class="{{ container_classes }}">
        <div class="{{ meta_classes }}">

        <h3 class="text-align--center">Swap your toys</h3>
        {% if collection.description != blank %}
            <div class="m0 f--main font-size__basic  text-align--center">
              <p>I can add extra info here if I need</p>
            </div>
          {% endif %}
        <div class="mt2 {{ form_classes }} lg--up--flex">
          
          <div class="md--dn--table full--w">
            {% if tags_enabled and sorting_enabled == false %}
            <div class="md--dn--table-cell md--dn--one-half md--dn--align--top">
              <div class="lg--up--hide font-size__basic mxn1">
                <a class="lg--up--hide px1 inline-block pointer color--{{ section_color }}-text" data-tag-filter-mobile-trigger>
                  <div class="inline-block">
                  {{ 'collections.general.filter' | t }}
                  <span class="font-size--xxxxs inline-block align--middle">
                    {% comment %}theme-check-disable MissingTemplate{% endcomment %}
                    <span class="chevron-down">{% render 'icon-chevron-down' %}</span>
                    <span class="chevron-up hide">{% render 'icon-chevron-up' %}</span>
                    {% comment %}theme-check-enable MissingTemplate{% endcomment %}
                  </span>
                  </div>
                </a>
                {% comment %}
                  TODO: This would never be displayed? Check
                {% endcomment %}
                <div class="p1 md--dn--hide" data-tag-list>
                  <ul class="list--reset m0">
                    {%- render 'collection__tag-items',
                        expanded: expanded,
                        section_color: section_color,
                    -%}
                  </ul>
                </div>
              </div>
            </div>
            {% endif %}
            {% if sorting_enabled or filtering_enabled %}
              {% comment %}theme-check-disable MissingTemplate{% endcomment %}
              <script src="{{ 'collection-filters-form.js' | asset_url }}" defer="defer"></script>
              <collection-filters-form class="facets md--dn--hide">
                <form id="CollectionFiltersForm" class="flex flex--row flex--wrap justify--between items--start justify--between">
                  {% if filtering_enabled %}
                    <div class="flex flex--row flex--wrap">
                      <div class="facets__wrapper flex flex--wrap items--center">
                        {%- unless collection.filters == empty -%}
                          <p class="facets__heading font-size__basic mt0 ml0 mb1 mr1">{{ 'collections.filtering.filter_by_label' | t }}</p>
                        {%- endunless -%}

                        {%- for filter in collection.filters -%}
                          {%- assign total_active_values = total_active_values | plus: filter.active_values.size -%}
                          {% case filter.type %}
                            {% when 'list' %}
                              <details class="disclosure-has-popup facets__disclosure mr1 mb1 js-filter" data-index="{{ forloop.index }}">
                                <summary class="disclosure__toggle facets__summary bg--transparent border--{{ section_color }}-text color--{{ section_color }}-text p1 inline-block font-size__basic">
                                  <div class="flex">
                                    <span>{{ filter.label | escape }}</span>
                                    <span class="count-bubble ml1">{%- if filter.active_values.size > 0 -%}({{ filter.active_values.size }}){%- endif -%}</span>
                                    <span class="disclosure__chevron-down font-size--xxxs inline-block ml1">{% render 'icon-chevron-down' %}</span>
                                    <span class="disclosure__chevron-up font-size--xxxs inline-block ml1">{% render 'icon-chevron-up' %}</span>
                                  </div>
                                </summary>
                                <div class="facets__display font-size--s bg--{{ section_color }}-background border--{{ section_color }}-text mt1">
                                  <div class="facets__header flex justify--between border-bottom--{{ section_color }}-text p1">
                                    <span class="facets__selected no-js-hidden">{{ 'collections.filtering.filters_selected' | t: count: filter.active_values.size }}</span>
                                    {% if filter.active_values.size > 0 %}
                                    <facet-remove>
                                      <a href="{{ filter.url_to_remove }}" class="facets__reset link underlined-link">
                                        {{ 'collections.filtering.reset' | t }}
                                      </a>
                                    </facet-remove>
                                    {% endif %}
                                  </div>

                                  <ul class="facets__list list-style-none m0 p1" role="list">
                                    {%- for value in filter.values -%}
                                      <li class="list-menu__item facets__item my1">
                                        <label for="Filter-{{ filter.label | escape }}-{{ forloop.index }}" class="facet-checkbox{% if value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %}">
                                          <input type="checkbox"
                                            name="{{ value.param_name }}"
                                            value="{{ value.value }}"
                                            id="Filter-{{ filter.label | escape }}-{{ forloop.index }}"
                                            {% if value.active %}checked{% endif %}
                                            {% if value.count == 0 and value.active == false %}disabled{% endif %}
                                          >

                                          <svg class="list-menu-item__icon-box"
                                                width="16"
                                                height="16"
                                                viewBox="0 0 16 16"
                                                aria-hidden="true"
                                                focusable="false">
                                            <rect width="15" height="15" x=".5" y=".5" stroke="currentColor" fill="none" />
                                          </svg>

                                          <svg class="list-menu-item__icon-check"
                                                width="11"
                                                height="9"
                                                viewBox="0 0 11 9"
                                                aria-hidden="true"
                                                focusable="false">
                                            <polygon fill="currentColor" points="7.593 -1.8 7.593 8.336 3.507 8.336 3.507 7.336 6.592 7.336 6.593 -1.8" transform="rotate(45 5.55 3.268)"/>
                                          </svg>
                                          {{ value.label | escape }} ({{ value.count }})
                                        </label>
                                      </li>
                                    {%- endfor -%}
                                  </ul>
                                </div>
                              </details>
                            {% when 'price_range' %}
                              {% liquid
                                assign currencies_using_comma_decimals = 'ANG,ARS,BRL,BYN,BYR,CLF,CLP,COP,CRC,CZK,DKK,EUR,HRK,HUF,IDR,ISK,MZN,NOK,PLN,RON,RUB,SEK,TRY,UYU,VES,VND' | split: ','
                                assign uses_comma_decimals = false
                                if currencies_using_comma_decimals contains cart.currency.iso_code
                                  assign uses_comma_decimals = true
                                endif
                              %}
                              <details class="disclosure-has-popup facets__disclosure mr1 mb1 js-filter" data-index="{{ forloop.index }}">
                                <summary class="disclosure__toggle facets__summary bg--transparent border--{{ section_color }}-text color--{{ section_color }}-text p1 inline-block font-size__basic">
                                  <div class="flex">
                                    <span>{{ filter.label | escape }}</span>
                                    <span class="count-bubble ml1">{%- if filter.min_value.value or filter.max_value.value -%}(1){%- endif -%}</span>
                                    <span class="disclosure__chevron-down font-size--xxxs inline-block ml1">{% render 'icon-chevron-down' %}</span>
                                    <span class="disclosure__chevron-up font-size--xxxs inline-block ml1">{% render 'icon-chevron-up' %}</span>
                                  </div>
                                </summary>
                                <div class="facets__display font-size--s bg--{{ section_color }}-background border--{{ section_color }}-text mt1">
                                  <div class="facets__header flex justify--between border-bottom--{{ section_color }}-text p1">
                                    {%- assign max_price_amount = filter.range_max | money -%}
                                    <span class="facets__selected">{{ 'collections.filtering.max_price_html' | t: price: max_price_amount }}</span>
                                    {% if filter.max_value.value or filter.min_value.value %}
                                    <facet-remove>
                                      <a href="{{ filter.url_to_remove }}" class="facets__reset link underlined-link" >
                                        {{ 'collections.filtering.reset' | t }}
                                      </a>
                                    </facet-remove>
                                    {% endif %}
                                  </div>
                                  <price-range class="facets__price flex justify--between mb1 pt1 px2 pb2">
                                    <div class="field flex--grow--1 full--w">
                                      <label class="field__label font-size__basic mb1" for="Filter-{{ filter.label | escape }}-GTE">{{ 'collections.filtering.from' | t }}</label>
                                      <span class="field__currency flex justify--center items--center">{{ cart.currency.symbol }}</span>
                                      <input class="field__input flex--grow--1 full--w border--{{ section_color }}-text bg--transparent p1"
                                        name="{{ filter.min_value.param_name }}"
                                        id="Filter-{{ filter.label | escape }}-GTE"
                                        {%- if filter.min_value.value -%}
                                          {%- if uses_comma_decimals -%}
                                            value="{{ filter.min_value.value | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
                                          {%- else -%}
                                            value="{{ filter.min_value.value | money_without_currency | replace: ',', '' }}"
                                          {% endif %}
                                        {%- endif -%}
                                        type="number"
                                        placeholder="0"
                                        min="0"
                                        max="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                                        >
                                    </div>
                                    <div class="field flex--grow--1 full--w">
                                      <label class="field__label font-size__basic mb1" for="Filter-{{ filter.label | escape }}-LTE">{{ 'collections.filtering.to' | t }}</label>
                                      <span class="field__currency flex justify--center items--center">{{ cart.currency.symbol }}</span>
                                      <input class="field__input flex--grow--1 full--w border--{{ section_color }}-text bg--transparent p1"
                                             name="{{ filter.max_value.param_name }}"
                                             id="Filter-{{ filter.label | escape }}-LTE"
                                             {%- if filter.max_value.value -%}
                                               {%- if uses_comma_decimals -%}
                                                 value="{{ filter.max_value.value | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
                                               {%- else -%}
                                                 value="{{ filter.max_value.value | money_without_currency | replace: ',', '' }}"
                                               {% endif %}
                                             {%- endif -%}
                                             type="number"
                                             placeholder="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                                             min="0"
                                             max="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                                             >
                                    </div>
                                  </div>
                                </price-range>
                              </details>
                          {% endcase %}
                        {%- endfor -%}
                        <noscript>
                          <button type="submit" class="facets__button ml1 font-size__basic btn border--active-text p1 block full--w bg--active-text color--active-text--overlay hv--border--active-accent hv--active-accent--overlay hv-bg--active-accent">{{ 'collections.filtering.filter_button' | t }}</button>
                        </noscript>
                      </div>
                    {% if collection.current_vendor or collection.current_type %}
                      <input type="hidden" name="q" value="{{ collection.current_vendor }}{{ collection.current_type }}">
                    {% endif %}
                    </div>
                  {% endif %}

                  {% if sorting_enabled %}
                    <div class="sorting">
                      <div class="flex flex--row flex--wrap items--center">
                        {%- assign sort_by = collection.sort_by | default: collection.default_sort_by -%}
                        <label class="sm--hide font-size__basic block mr1 mb1" for="SortBy">{{ 'collections.sorting.title' | t }}</label>
                        <select name="sort_by" id="SortBy" class="bg--transparent border--{{ section_color }}-text color--{{ section_color }}-text p1 inline-block font-size__basic pr3 mb1">
                          <option value="manual"{% if sort_by == "manual" %} selected="selected"{% endif %}>{{ 'collections.sorting.featured' | t }}</option>
                          <option value="best-selling"{% if sort_by == "best-selling" %} selected="selected"{% endif %}>{{ 'collections.sorting.best_selling' | t }}</option>
                          <option value="title-ascending"{% if sort_by == "title-ascending"  %} selected="selected"{% endif %}>{{ 'collections.sorting.az' | t }}</option>
                          <option value="title-descending"{% if sort_by == "title-descending" %} selected="selected"{% endif %}>{{ 'collections.sorting.za' | t }}</option>
                          <option value="price-ascending"{% if sort_by == "price-ascending" %} selected="selected"{% endif %}>{{ 'collections.sorting.price_ascending' | t }}</option>
                          <option value="price-descending"{% if sort_by == "price-descending" %} selected="selected"{% endif %}>{{ 'collections.sorting.price_descending' | t }}</option>
                          <option value="created-descending"{% if sort_by == "created-descending" %} selected="selected"{% endif %}>{{ 'collections.sorting.date_descending' | t }}</option>
                          <option value="created-ascending"{% if sort_by == "created-ascending" %} selected="selected"{% endif %}>{{ 'collections.sorting.date_ascending' | t }}</option>
                        </select>
                      </div>
                    </div>
                  {% endif %}

                  <div class="active-facets active-facets-desktop full--w mt2 font-size__basic">
                    <p class="visually-hidden" role="status">{{ 'collections.filtering.product_count' | t: product_count: collection.products_count, count: collection.all_products_count }}</p>
                    <facet-remove class="inline-block color--{{ section_color }}-text">
                      <a href="{{ collection.url }}?sort_by={{ sort_by }}"
                         class="inline-block link-underline link-underline--{{ section_color }} hover-underline--{{ section_color }} color--inherit">
                        <span>
                          {{ 'collections.filtering.clear_all' | t }}
                        </span>
                      </a>
                    </facet-remove>
                    {%- for filter in collection.filters -%}
                      {%- for value in filter.active_values -%}
                        <facet-remove class="inline-block ml2 color--{{ section_color }}-text">
                          <a href="{{ value.url_to_remove }}"
                             class="inline-block link-underline link-underline--{{ section_color }} hover-underline--{{ section_color }} color--inherit">
                            <span class="link-with-icon-inner">
                              {% render 'icon-close' %}
                              {{- value.label | escape -}}
                            </span>
                            <span class="visually-hidden">
                              ({{ 'collections.filtering.clear' | t }})
                            </span>
                          </a>
                        </facet-remove>
                      {%- endfor -%}
                      {% if filter.type == "price_range" %}
                        {%- if filter.min_value.value != nil or filter.max_value.value != nil -%}
                          <facet-remove class="inline-block ml2 color--{{ section_color }}-text">
                            <a href="{{ filter.url_to_remove }}"
                               class="inline-block link-underline link-underline--{{ section_color }} hover-underline--{{ section_color }} color--inherit">
                              <span class="link-with-icon-inner">
                                {% render 'icon-close' %}
                                {%- if filter.min_value.value -%}{{ filter.min_value.value | money }}{%- else -%}{{ 0 | money }}{%- endif -%}<span class="price-range-ndash">&ndash;</span>{%- if filter.max_value.value -%}{{ filter.max_value.value | money }}{%- else -%}{{ filter.range_max | money }}{%- endif -%}
                              </span>
                              <span class="visually-hidden">
                                ({{ 'collections.filtering.clear' | t }})
                              </span>
                            </a>
                          </facet-remove>
                        {%- endif -%}
                      {% endif %}
                    {%- endfor -%}
                  </div>
                </form>
              </collection-filters-form>
              <filters-menu class="mobile-facets__wrapper">
                <details class="disclosure-has-popup lg--up--hide">
                  <summary>
                    <span class="mobile-facets__open flex items--center font-size__basic">
                      <span>{{ 'collections.filtering.filter_and_sort' | t }}</span>
                      <span class="count-bubble">
                        {%- if total_active_values > 0 -%}({{ total_active_values }}){%- endif -%}
                      </span>
                      <span class="font-size--xxxs">
                        {% render 'icon-chevron-down' %}
                      </span>
                    </span>
                    <span tabindex="0" class="mobile-facets__close mobile-facets__close--no-js fixed top--0 right--0 p2 font-size--m pointer color--active-text hv--active-accent">
                      {%- render 'icon-close' -%}
                    </span>
                  </summary>
                  <collection-filters-form>
                    <form id="CollectionFiltersFormMobile"
                          class="mobile-facets fixed top--0 right--0 bottom--0 left--0 full--w full--h">
                      <div class="mobile-facets__inner bg--active-background color--active-text full--h">
                        <div class="mobile-facets__header pt2 px2 pb0">
                          <div class="mobile-facets__header-inner">
                            <h2 class="mobile-facets__heading h3">{{ 'collections.filtering.filter_and_sort' | t }}</h2>
                            <p class="mobile-facets__count font-size--s color--active-meta" role="status">{{ 'collections.filtering.product_count' | t: product_count: collection.products_count, count: collection.all_products_count }}</p>
                          </div>
                          <hr class="hr my1 bg--active-text opacity--3">
                        </div>
                        <div class="mobile-facets__main relative mt2 pt0 px2 pb2">
                          {%- for filter in collection.filters -%}
                            {% case filter.type %}
                              {% when 'list' %}
                                <details class="mobile-facets__details js-filter" data-index="mobile-{{ forloop.index }}">
                                  <summary class="mobile-facets__summary py1">
                                    <div>
                                      <span>{{ filter.label | escape }}</span>
                                      <span class="count-bubble">
                                        {%- if filter.active_values.size > 0 -%}({{ filter.active_values.size }}){%- endif -%}
                                      </span>
                                      <span class="mobile-facets__arrow no-js-hidden">{% render 'icon-chevron-right' %}</span>
                                      <noscript>{% render 'icon-chevron-right' %}</noscript>
                                    </div>
                                  </summary>
                                  <div class="mobile-facets__submenu absolute top--0 right--0 bottom--0 left--0 full--w full-h bg--active-background pt0 px2 pb2 z1">
                                    <button class="mobile-facets__close-button full--w text-align--center color--active-text flex justify--center items--center relative font-size--s btn--plain link link--text focus-inset" aria-expanded="true" type="button">
                                      <span class="absolute left--0 font-size--xs">
                                        {% render 'icon-previous' %}
                                      </span>
                                    </button>
                                    <h3 class="h4 pl1 mt3">{{ filter.label | escape }}</h3>
                                    <ul class="mobile-facets__list list-style-none mx0 mb3 mt1 p1 font-size--s" role="list">
                                      {%- for value in filter.values -%}
                                        <li class="mobile-facets__item list-menu__item mb1 ">
                                          <label for="Filter-{{ filter.label | escape }}-mobile-{{ forloop.index }}" class="mobile-facets__label{% if value.count == 0 and value.active == false %} mobile-facets__label--disabled{% endif %}">
                                            <input class="mobile-facets__checkbox" type="checkbox" name="{{ value.param_name }}" value="{{ value.value }}" id="Filter-{{ filter.label | escape }}-mobile-{{ forloop.index }}"
                                              {% if value.active %}checked{% endif %}
                                              {% if value.count == 0 and value.active == false %}disabled{% endif %}
                                            >

                                            <span class="mobile-facets__highlight"></span>

                                            <svg class="list-menu-item__icon-box"
                                              width="16"
                                              height="16"
                                              viewBox="0 0 16 16"
                                              aria-hidden="true"
                                              focusable="false">
                                          <rect width="15" height="15" x=".5" y=".5" stroke="currentColor" fill="none" />
                                          </svg>

                                          <svg class="list-menu-item__icon-check"
                                                width="11"
                                                height="9"
                                                viewBox="0 0 11 9"
                                                aria-hidden="true"
                                                focusable="false">
                                            <polygon fill="currentColor" points="7.593 -1.8 7.593 8.336 3.507 8.336 3.507 7.336 6.592 7.336 6.593 -1.8" transform="rotate(45 5.55 3.268)"/>
                                          </svg>

                                            {{ value.label | escape }} ({{ value.count }})
                                          </label>
                                        </li>
                                      {%- endfor -%}
                                    </ul>

                                    <div class="no-js-hidden mobile-facets__footer flex font-size--s mxn1">
                                      <facet-remove class="mx1 flex flex--1 always-show">
                                        <a href="{{ collection.url }}" class="mobile-facets__clear btn border--none p1 block full--w bg--transparent border--active-text color--active-text hv--border--active-accent hv--active-accent">{{ 'collections.filtering.clear' | t }}</a>
                                      </facet-remove>
                                      <button type="button" class="no-js-hidden mx1 flex--1 font-size-inherit btn border--active-text p1 block full--w bg--active-text color--active-text--overlay hv--border--active-accent hv--active-accent--overlay hv-bg--active-accent" onclick="this.closest('.mobile-facets__wrapper').querySelector('summary').click()">{{ 'collections.filtering.apply' | t }}</button>
                                      <noscript><button class="mx1 flex--1 font-size-inherit btn border--active-text p1 block full--w bg--active-text color--active-text--overlay hv--border--active-accent hv--active-accent--overlay hv-bg--active-accent">{{ 'collections.filtering.apply' | t }}</button></noscript>
                                    </div>
                                  </div>
                                </details>
                              {% when 'price_range' %}
                              <details class="mobile-facets__details js-filter" data-index="mobile-{{ forloop.index }}">
                                <summary class="mobile-facets__summary py1">
                                  <div>
                                    <span>{{ filter.label | escape }}</span>
                                    <span class="count-bubble {{ filter.active_values.size }} count-bubble--dot">{%- if filter.min_value.value or filter.max_value.value -%}(1){%- endif -%}</span>
                                    <span class="mobile-facets__arrow no-js-hidden">{% render 'icon-chevron-right' %}</span>
                                    <noscript>{% render 'icon-chevron-right' %}</noscript>
                                  </div>
                                </summary>
                                <div class="mobile-facets__submenu absolute top--0 right--0 bottom--0 left--0 full--w full-h bg--active-background pt0 px2 pb2 z1">
                                  <button class="mobile-facets__close-button color--active-text full--w text-align--center flex justify--center items--center relative font-size--s btn--plain link link--text focus-inset" aria-expanded="true" type="button">
                                    <span class="absolute left--0 font-size--xs">
                                      {% render 'icon-previous' %}
                                    </span>
                                  </button>

                                  <h3 class="h4 pl1 mt3">{{ filter.label | escape }}</h3>

                                  <price-range class="facets__price flex items-center justify--between p1 mxn2 mb1">
                                    <div class="field full--w flex--grow--1 mx1">
                                      <label class="field__label font-size__basic mb1" for="Mobile-Filter-{{ filter.label | escape }}-GTE">{{ 'collections.filtering.from' | t }}</label>
                                      <span class="field__currency flex justify--center items--center">{{ cart.currency.symbol }}</span>
                                      <input class="field__input border--active-text bg--transparent p1"
                                        name="{{ filter.min_value.param_name }}"
                                        id="Mobile-Filter-{{ filter.label | escape }}-GTE"
                                        {%- if filter.min_value.value -%}
                                          {%- if uses_comma_decimals -%}
                                            value="{{ filter.min_value.value | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
                                          {%- else -%}
                                            value="{{ filter.min_value.value | money_without_currency | replace: ',', '' }}"
                                          {% endif %}
                                        {%- endif -%}
                                        type="number"
                                        placeholder="0"
                                        min="0"
                                        max="{{ filter.range_max | divided_by: 100 | ceil }}">
                                    </div>
                                    <div class="field full--w flex--grow--1 mx1">
                                      <label class="field__label font-size__basic mb1" for="Mobile-Filter-{{ filter.label | escape }}-LTE">{{ 'collections.filtering.to' | t }}</label>
                                      <span class="field__currency flex justify--center items--center">{{ cart.currency.symbol }}</span>
                                      <input class="field__input border--active-text bg--transparent p1"
                                        name="{{ filter.max_value.param_name }}"
                                        id="Mobile-Filter-{{ filter.label | escape }}-LTE"
                                        {%- if filter.max_value.value -%}
                                          {%- if uses_comma_decimals -%}
                                            value="{{ filter.max_value.value | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
                                          {%- else -%}
                                            value="{{ filter.max_value.value | money_without_currency | replace: ',', '' }}"
                                          {% endif %}
                                        {%- endif -%}
                                        type="number"
                                        placeholder="{{ filter.range_max | divided_by: 100 | ceil }}"
                                        min="0"
                                        max="{{ filter.range_max | divided_by: 100 | ceil }}">
                                    </div>
                                  </price-range>

                                  <p class="mobile-facets__info p1 mt1 mb3 opacity--4 text-center font-size__basic">
                                    {{ "collections.filtering.max_price_html" | t: price: max_price_amount }}
                                  </p>

                                  <div class="no-js-hidden mobile-facets__footer flex font-size--s mxn1">
                                    <facet-remove class="mx1 flex flex--1 always-show">
                                      <a href="{{ collection.url }}" class="mobile-facets__clear btn border--none p1 block full--w bg--transparent border--active-text color--active-text hv--border--active-accent hv--active-accent">{{ 'collections.filtering.clear' | t }}</a>
                                    </facet-remove>
                                    <button type="button" class="no-js-hidden mx1 flex--1 font-size-inherit btn border--active-text p1 block full--w bg--active-text color--active-text--overlay hv--border--active-accent hv--active-accent--overlay hv-bg--active-accent" onclick="this.closest('.mobile-facets__wrapper').querySelector('summary').click()">{{ 'collections.filtering.apply' | t }}</button>
                                    <noscript><button class="mx1 flex--1 font-size-inherit btn border--active-text p1 block full--w bg--active-text color--active-text--overlay hv--border--active-accent hv--active-accent--overlay hv-bg--active-accent">{{ 'collections.filtering.apply' | t }}</button></noscript>
                                  </div>
                                </div>
                              </details>
                            {% endcase %}
                          {%- endfor -%}

                          {%- if sorting_enabled -%}
                            <div class="mobile-facets__details js-filter" data-index="mobile-{{ forloop.index }}">
                              <div class="mobile-facets__summary">
                                <div class="mobile-facets__sort flex items--center justify--between">
                                  <label for="SortBy-mobile">{{ 'collections.sorting.sort_by_label' | t }}</label>
                                  <div class="select">
                                    <select name="sort_by"
                                            class="select__select bg--transparent border--transparent color--active-text p1 inline-block font-size__basic pr3"
                                            id="SortBy-mobile"
                                            aria-describedby="a11y-refresh-page-message">
                                      {%- for option in collection.sort_options -%}
                                        <option value="{{ option.value | escape }}"{% if option.value == sort_by %} selected="selected"{% endif %}>{{ option.name | escape }}</option>
                                      {%- endfor -%}
                                    </select>
                                  </div>
                                </div>
                              </div>
                            </div>
                          {%- endif -%}
                          <hr class="hr mt2 mb3 bg--active-text opacity--3">
                          <div class="mobile-facets__footer flex font-size--s mxn1">
                            <facet-remove class="mx1 flex flex--1 always-show">
                              <a href="{{ collection.url }}" class="mobile-facets__clear btn border--none p1 block full--w bg--transparent border--active-text color--active-text hv--border--active-accent hv--active-accent">{{ 'collections.filtering.clear' | t }}</a>
                            </facet-remove>
                            <button type="button" class="no-js-hidden mx1 flex--1 font-size-inherit btn border--active-text p1 block full--w bg--active-text color--active-text--overlay hv--border--active-accent hv--active-accent--overlay hv-bg--active-accent" onclick="this.closest('.mobile-facets__wrapper').querySelector('summary').click()">{{ 'collections.filtering.apply' | t }}</button>
                            <noscript><button class="mx1 flex--1 font-size-inherit btn border--active-text p1 block full--w bg--active-text color--active-text--overlay hv--border--active-accent hv--active-accent--overlay hv-bg--active-accent">{{ 'collections.filtering.apply' | t }}</button></noscript>
                          </div>
                        </div>

                        {% if collection.current_vendor or collection.current_type %}
                          <input type="hidden" name="q" value="{{ collection.current_vendor }}{{ collection.current_type }}">
                        {% endif %}
                      </div>
                    </form>
                  </collection-filters-form>
                </details>
              </filters-menu>
              <div class="active-facets active-facets-mobile mt2 font-size__basic lg--up--hide">
                <facet-remove class="inline-block mr2 mb1 color--{{ section_color }}-text">
                  <a href="{{ collection.url }}?sort_by={{ sort_by }}"
                     class="inline-block link-underline link-underline--{{ section_color }} hover-underline--{{ section_color }} color--inherit">
                    <span>
                      {{ 'collections.filtering.clear_all' | t }}
                    </span>
                  </a>
                </facet-remove>
                {%- for filter in collection.filters -%}
                  {%- for value in filter.active_values -%}
                    <facet-remove class="inline-block mr2 mb1 color--{{ section_color }}-text">
                      <a href="{{ value.url_to_remove }}"
                         class="inline-block link-underline link-underline--{{ section_color }} hover-underline--{{ section_color }} color--inherit">
                        <span class="link-with-icon-inner">
                          {% render 'icon-close' %}
                          {{ value.label | escape }}
                        </span>
                        <span class="visually-hidden">
                          ({{ 'collections.filtering.clear' | t }})
                        </span>
                      </a>
                    </facet-remove>
                  {%- endfor -%}

                  {% if filter.type == "price_range" %}
                    {%- if filter.min_value.value != nil or filter.max_value.value != nil -%}
                      <facet-remove class="inline-block mr2 mb1 color--{{ section_color }}-text">
                        <a href="{{ filter.url_to_remove }}"
                           class="inline-block link-underline link-underline--{{ section_color }} hover-underline--{{ section_color }} color--inherit">
                          <span class="visually-hidden">
                            {{ 'collections.filtering.clear' | t }}:
                          </span>
                          <span class="link-with-icon-inner">
                            {% render 'icon-close' %}
                            {%- if filter.min_value.value -%}{{ filter.min_value.value | money }}{%- else -%}{{ 0 | money }}{%- endif -%}<span class="price-range-ndash">&ndash;</span>{%- if filter.max_value.value -%}{{ filter.max_value.value | money }}{%- else -%}{{ filter.range_max | money }}{%- endif -%}
                          </span>
                        </a>
                      </facet-remove>
                    {%- endif -%}
                  {% endif %}
                {%- endfor -%}
              </div>
              {% comment %}theme-check-enable MissingTemplate{% endcomment %}
            {% endif %}
          </div>
        </div>
      </div>
    </header>

    <div id="CollectionProductGrid" class="grid mt3 lg--up--mt3">
      {% paginate collection.products by section.settings.no_posts %}

      {% if tags_enabled %}
        {%- liquid
          assign expanded = false
          assign count = 0
          for tag in collection.all_tags
            if current_tags contains tag and count > 10
              assign expanded = true
            endif
            assign count = count | plus: 1
          endfor
        -%}
        <div class="collection__sticky-tags grid__item lg--up--one-seventh {% unless expanded %}lg--up--sticky--unless-sticky-header{% endunless %} top--0 font-size__basic {% if sorting_enabled == false %}md--dn--hide{% endif %}">
          <a class="lg--up--hide p1 inline-block mxn1 mb1 pointer color--{{ section_color }}-text" data-tag-filter-mobile-trigger>
            <div class="inline-block">
            {{ 'collections.general.filter' | t }}
            <span class="font-size--xxxxs inline-block align--middle">
              {% comment %}theme-check-disable MissingTemplate{% endcomment %}
              <span class="chevron-down">{% render 'icon-chevron-down' %}</span>
              <span class="chevron-up hide">{% render 'icon-chevron-up' %}</span>
              {% comment %}theme-check-enable MissingTemplate{% endcomment %}
            </span>
            </div>
          </a>
          <ul class="list--reset m0 mtn1 pb3 lg--up--pb0 lg--up--pt3 md--dn--hide font-size__basic {% if section.settings.capitalize_tags %}capitalize{% endif %}" data-tag-list>
              {%- render 'collection__tag-items',
                  expanded: expanded,
                  section_color: section_color,
              -%}
          </ul>
        </div>
      {% endif %}

      <div class="collection__grid-items grid__item pt1 {% if tags_enabled %}lg--up--six-sevenths{% endif %}"
           id="main-collection-product-grid" data-id="{{ section.id }}">
        {% if collection.all_products_count > 0 %}
            <div class="collection-cascade grid">
            

                {% liquid assign col_count_desktop = 1 %}

                {% for product in collection.products %}
                    {%- liquid
                      if forloop.last
                        assign last_col = true
                      endif
                    -%}
                  {% capture mobile_count %}{% cycle '1', '2' %}{% endcapture %}

                    <div class="grid__item  lg--up--one-third">
                      {%- render 'product-swap-item',
                          product: product,
                          section_color: section_color,
                          loop_index: forloop.index0,
                      -%}
                      
                    </div>

                  {% assign col_count_desktop = col_count_desktop | plus: 1 %}
                  {% if col_count_desktop == 5 %}
                    {% assign col_count_desktop = 1 %}
                  {% endif %}
                {% endfor %}
            </div>
          
        {% else %}
          <p class="mt2">{{ 'collections.general.no_matches' | t }}</p>
        {% endif %}

        {% if paginate.pages > 1 %}
          {%- render 'pagination',
              paginate: paginate,
              section_color: section_color,
          -%}
        {% endif %}
      </div>
      {% endpaginate %}
    </div><!-- /#CollectionProductGrid -->


  </div>
</section>
